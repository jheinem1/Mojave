/// <reference types="@rbxts/compiler-types" />
import { NetGlobalMiddleware } from "../middleware";
export {};
import { AsyncServerFunctionDeclaration, BidirectionalEventDeclaration, ClientToServerEventDeclaration, DeclarationsOf, FilterDeclarations, FilterGroups, InferServerCallback, InferServerConnect, InferServerRemote, RemoteDeclarations } from "./Types";
import { InferDefinition } from "./NamespaceBuilder";
declare type ServerEventDeclarationKeys<T extends RemoteDeclarations> = keyof DeclarationsOf<FilterDeclarations<T>, ClientToServerEventDeclaration<any> | BidirectionalEventDeclaration<any, any>> & string;
declare type ServerEventConnectFunction<T extends RemoteDeclarations, K extends keyof T> = InferServerConnect<Extract<T[K], ClientToServerEventDeclaration<any> | BidirectionalEventDeclaration<any, any>>>;
declare type ServerFunctionDeclarationKeys<T extends RemoteDeclarations> = keyof DeclarationsOf<FilterDeclarations<T>, AsyncServerFunctionDeclaration<any, any>> & string;
declare type ServerFunctionCallbackFunction<T extends RemoteDeclarations, K extends keyof T> = InferServerCallback<Extract<T[K], AsyncServerFunctionDeclaration<any, any>>>;
export declare class ServerDefinitionBuilder<T extends RemoteDeclarations> {
    private globalMiddleware?;
    private namespace;
    constructor(declarations: T, globalMiddleware?: NetGlobalMiddleware[] | undefined, namespace?: string);
    /**
     * Connects a callback function to this event, in which if any events are recieved by the client will be called.
     *
     * @param name The name
     * @param fn The callback
     *
     * Shortcut for:
     * ```ts
     * Declaration.Server.Create(name).Connect(fn)
     * ```
     */
    OnEvent<K extends ServerEventDeclarationKeys<T>>(name: K, fn: ServerEventConnectFunction<T, K>): void;
    /**
     * Gets the specified group as a definition builder
     * @param groupId The name of the group
     *
     * ```ts
     * const FeatureA = Remotes.Server.Group("FeatureA");
     * const FeatureAEvent = FeatureA.Create("FeatureAEvent");
     * ```
     *
     */
    GetNamespace<K extends keyof FilterGroups<T> & string>(groupId: K): ServerDefinitionBuilder<InferDefinition<T[K]>>;
    /**
     * Creates or retrieves the specified server remote instance `remoteId` based on the definition and returns it.
     *
     * _The created remote will be cached_
     *
     * @param remoteId the id of the remote
     *
     */
    Create<K extends keyof FilterDeclarations<T> & string>(remoteId: K): InferServerRemote<T[K]>;
    /**
     * Sets the callback that will be invoked when the client calls this function.
     *
     * The returned result will be returned to the client. If the callback is a Promise, it will only return a value if the promise is resolved.
     *
     * @param name The name
     * @param fn The callback
     *
     * Shortcut for:
     * ```ts
     * Declaration.Server.Create(name).SetCallback(fn)
     * ```
     */
    OnFunction<K extends ServerFunctionDeclarationKeys<T>>(name: K, fn: ServerFunctionCallbackFunction<T, K>): void;
}
